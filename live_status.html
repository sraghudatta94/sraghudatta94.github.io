<!doctype html>
<html lang="en" class="no-js">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" href="css/reset.css"> <!-- CSS reset -->
	<link rel="stylesheet" href="css/style.css"> <!-- Resource style -->
	<script src="js/modernizr.js"></script>
	<script src="js/main.js"></script><!-- Modernizr -->
  <link rel="stylesheet" href="css/form.css">
	<title>Train Helper</title>
</head>
<script>
		function loadDoc() {
				if (document.getElementById("train_number").value == "") {
						document.getElementById("train_next_location").innerHTML = "Enter train number";
				}
				else {
						document.getElementById("train_heading").innerHTML = "Please wait data loading.....";
						var date_input = document.getElementById("train_date").value;
						console.log("Date input :" + date_input);
						var res = date_input.split("-");
						date_input = res[2] + "-" + res[1] + "-" + res[0];
						var train_input = document.getElementById("train_number").value;
						console.log("Train number :" + train_input);
						var url1 = "https://api.railwayapi.com/v2/live/train/" + train_input + "/date/" + date_input + "/apikey/rn5mt9ogj8/";
						console.log(url1);
						var url = "https://api.railwayapi.com/v2/live/train/17210/date/22-12-2017/apikey/rn5mt9ogj8/";

						var xhttp = new XMLHttpRequest();
						xhttp.onreadystatechange = function () {
								if (this.readyState == 4 && this.status == 200) {

										var obj = JSON.parse(this.response);
										if (obj.train.name == null) {
												document.getElementById("train_next_location").innerHTML = "Enter valid train number";
										}
										else {
												document.getElementById("train_status_table").innerHTML = obj.position;
												document.getElementById("train_name_table").innerHTML = obj.train.name;
												document.getElementById("train_location_table").innerHTML = obj.current_station.name;
												document.getElementById("train_data-table").innerHTML = obj.start_date;
												document.getElementById("train_heading").innerHTML = "Live Status Loaded succesfully";
										}


								}
						};
						xhttp.open("GET", url1, true);
						xhttp.send();
				}

		}
</script>
<script>
		function setAttributes() {
				var today = new Date();
				var date = today.getFullYear() + '-' + (today.getMonth() + 1) + '-' + today.getDate();
				console.log(date);
				document.getElementById("train_date").value = date;
		}

</script>
<body>
<header>
	<nav class="cd-stretchy-nav">
		<a class="cd-nav-trigger" href="#0">
			Menu
			<span aria-hidden="true"></span>
		</a>

		<ul>
			<li><a href="live_status.html" class="active"><span>Live Status</span></a></li>
			<li><a href="under_development.html"><span>PNR Status</span></a></li>
			<li><a href="under_development.html"><span>Train Route</span></a></li>
			<li><a href="under_development.html"><span>Seat Availability</span></a></li>
			<li><a href="under_development.html"><span>Train Between stations</span></a></li>
			<li><a href="under_development.html"><span>Train name/number</span></a></li>
			<li><a href="under_development.html"><span>Train fare/enquiry</span></a></li>
			<li><a href="under_development.html"><span>Train arraivals</span></a></li>
			<li><a href="under_development.html"><span>Train Between Status</span></a></li>
			<li><a href="under_development.html"><span>Train Between Status</span></a></li>
			<li><a href="under_development.html"><span>Train Between Status</span></a></li>
			<li><a href="under_development.html"><span>Train Between Status</span></a></li>
			<li><a href="under_development.html"><span>Train Between Status</span></a></li>
			<li><a href="under_development.html"><span>Train Between Status</span></a></li>
		</ul>

		<span aria-hidden="true" class="stretchy-nav-bg"></span>
	</nav>
</header>

<main class="cd-main-content">
	<form id="contact-form">
		<div class="container">
		<h1 id="train_heading">Live Status</h1>
		<div class="contact">

			<div class="right-w3">

				<table class="table-fill">

<tbody class="table-hover">
<tr>
<td class="text-left">Train Name</td>
<td class="text-left" id="train_name_table"></td>
</tr>
<tr>
<td class="text-left" >Current Date</td>
<td class="text-left" id="train_data-table"></td>
</tr>
<tr>
<td class="text-left">Current Location</td>
<td class="text-left" id ="train_location_table"></td>
</tr>
<tr>
<td class="text-left" >Current Status</td>
<td class="text-left" id="train_status_table"></td>
</tr>

</tbody>
</table>
</div>
			<form action="#" method="post">
				<div class="left">
					<div class="name">
						<i class="fa fa-user" aria-hidden="true"></i>
						<input type="text" name="name" id ="train_number" class="name" placeholder="Train Number" required="">
					</div>
					<div class="email">
						<i class="fa fa-envelope" ></i>
						<input type="text" id="train_date" name="train_date" class="email" placeholder="Date" readonly>
					</div>

					<input type ="button" value="Request Data" onclick="loadDoc()">
				</div>
			</form>
			<div class="clear"></div>
		</div>
		<div class="footer-w3l">
			<p class="agileinfo"> &copy; 2018 Raghu Datta . All Rights Reserved | Design by Raghu Datta</p>
		</div>

	</div>

	</form>
</main>


<script src="js/jquery-2.1.4.js"></script>
<script src="js/main.js"></script> <!-- Resource jQuery -->
</body>
</html>
